<main class="main-container">
  <div class="content-container">
    <app-header [ComponentName]="'Friends'"
      textTooltip="This is your friends screen, where you can send friend requests and view your friends list."
      tooltipPosition="right"></app-header>
    <content>
      <div class="search-container">
        <div></div>
        <!-- <div class="search">
          <input type="text" id="search" placeholder="Search for a friend" style="display: flex; align-self: center" />
          <button class="search-button">
            <i class="fas fa-search"></i>
          </button>
        </div> -->
        <app-button (click)="toggleAddFriendDialog()" text="Add a new Friend" [isDisabled]="isLoading"> </app-button>
      </div>

      <app-dialog *ngIf="isAddFriendDialogOpen" (close)="toggleAddFriendDialog()" dialog_title="Add Friends">
        <div class="form-data">
          <app-primary-input type="text" placeholder="Insert your friend's email " [(ngModel)]="friendEmail" />
        </div>
        <app-button text="Add" (click)="onAddFriend()"></app-button>
      </app-dialog>

      @if(content.friends === undefined || content.friends.length === 0 || isLoading) {
      <div style="width: 100%; height: 30rem;">
        <app-status-request [isLoading]="isLoading" [isEmpty]="content.friends.length == 0"></app-status-request>
      </div>
      } @else {
      <div>
        <div class="cards">
          <ul>
            <li *ngFor="let item of content.friends; let i = index">
              <app-friend-card [name]="item.username" [dateStartFriendship]="item.dateStartFriendship"
                [image]="item.image" (decline)="openDialog(item.id)">
              </app-friend-card>
            </li>
            <div *ngIf="showDialog">
              <app-confirmation-dialog [message]="'Are you sure you want to proceed?'" (onConfirm)="onDeleteFriend()"
                (onCancel)="handleCancel()">
              </app-confirmation-dialog>
            </div>
          </ul>
        </div>
      </div>
      <div class="pagination">
        <button class="pagination__arrow" (click)="previousPage()"><i class="fas fa-arrow-left"></i>
          <span>Previous</span></button>
        @for (item of pages; track $index) {
        @if (item === currentPage) {
        <button class="pagination__number pagination_selected">{{ item }}</button>
        }@else {
        <button class="pagination__number" (click)="goToPage(item)">{{ item }}</button>
        }
        }
        <button class=" pagination__arrow" (click)="nextPage()"><span>Next</span> <i class="fas fa-arrow-right">
          </i></button>
      </div>
      }
    </content>
  </div>
</main>